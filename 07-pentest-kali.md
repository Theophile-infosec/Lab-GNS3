# Pentest & Simulation d’attaques depuis Kali Linux<br>
<br>

**Sommaire** : <br>

I. [Reconnaissance active (approche pentest)]() <br>
II. [Reconnaissance passive (simulation attaquant)](#ii-mise-%C3%A0-jour-dhcp-pour-la-nouvelle-architecture) <br>

<br>

# Objectifs :<br>
<br>
Objectifs :

Utiliser des techniques de reconnaissance et d’énumération basiques afin de vérifier l’exposition réelle du laboratoire :
- Identifier les machines actives sur le réseau
- Observer les services réellement accessibles depuis un VLAN client
- Tester le filtrage inter-VLAN via des scans réseau contrôlés
- Évaluer les informations exposées par le service DNS
- Simuler une approche attaquant (reconnaissance active et passive)
- Valider que la surface d’attaque reste limitée

**Topologie du laboratoire :**
<br>
<br>
<img width="650" height="470" alt="image" src="https://github.com/user-attachments/assets/d09ce27c-da24-4c96-9fd3-ba25d22ab20e" />
<br>

- Serveur DHCP : Linux_Server-1 (e0)
- Clients : Linux_Desktop-1 (e0), Windows-10_Desktop-1 (e0), Kali_Linux (e0)
- Commutation : Linux_Switch
- Pare-feu : Linux_Fierwall (e0)
- Plan d'adressage : VLAN10 → 10.10.10.0/24, VLAN20 → 10.10.20.0/24, VLAN30 → 10.10.30.0/24<br>
<br>

# Procédures :<br>
<br>

## I. Reconnaissance active (approche pentest)

### 1. Lister les machines actives

**Objectif** :
- Identifier rapidement les hôtes actifs sur le VLAN client.

Commande : <br>
*nmap -sn 10.10.10.0/24*

Fonctionnement :
- Désactive le port scan.
- Effectue uniquement la découverte d’hôtes.
- Utilise principalement ARP.

Résultat :
- Liste des machines actives du subnet.

<br>
<br>
Capture d'écran : <br>
<br>
<img width="378" height="149" alt="image" src="https://github.com/user-attachments/assets/b84dccce-0ea4-460e-a351-259912b35275" />
<br>
<br>
<br>

### 2. IP et MAC des machines actives

**Objectif** :
- Associer IP et adresses MAC des machines détectées.

Commande : <br>
*arp-scan --localnet*

Fonctionnement :
- Envoie des requêtes ARP broadcast.
- Interroge chaque IP du subnet local.
- Récupère IP + MAC réelles.

Résultat :
- Liste IP / MAC des machines actives.

<br>
<br>
Capture d'écran : <br>
<br>
<img width="534" height="56" alt="image" src="https://github.com/user-attachments/assets/6b5e8c99-ed68-4816-a3f8-bcbac86d9b5d" />
<br>
<br>
<br>

### 3. Port scan complet serveur

**Objectif** :
- Identifier les services réellement exposés sur le VLAN serveur.

Commande : <br>
*nmap -sS -Pn -p- 10.10.30.1<br>
nmap -sV -sC -Pn 10.10.30.1*

Fonctionnement :
- *-sS* : scan SYN (half-open).
- *-Pn* : ignore le ping initial.
- *-p-* : scan des 65535 ports.
- *-sV* : détection version service.
- *-sC* : scripts NSE par défaut.

Résultat :
- Seul le port DNS (53/TCP) apparaît ouvert.
- Service identifié : BIND.

<br>
<br>
Capture d'écran : <br>
<br>
<img width="420" height="83" alt="image" src="https://github.com/user-attachments/assets/15fb6134-bad0-42b9-a15c-9d017ca9f0b6" />
<img width="574" height="87" alt="image" src="https://github.com/user-attachments/assets/ed988452-7a01-4632-bb21-fe4525e5c9d6" />

<br>
<br>
<br>

### 4. Scan du dubnet distant

**Objectif** :
- Observer le comportement du firewall lors d’un scan inter-VLAN.

Commande : <br>
*nmap -sS -Pn 10.10.30.0/24*

Fonctionnement :
- Envoi de SYN vers chaque IP.
- Le firewall route mais filtre le trafic.

Résultat :
- Hosts majoritairement en état filtered.
- Scan peu fiable.

<br>
<br>
Capture d'écran : <br>
<br>

<br>
<br>
<br>

### 5. Port scan complet client

**Objectif** :
- Vérifier qu’aucun service n’est exposé côté client.

Commande : <br>
*nmap -sS -Pn 10.10.10.101*

Fonctionnement :
- Scan SYN classique.
- Vérifie ports accessibles.

Résultat :
- Host actif.
- Aucun service exposé.

<br>
<br>
Capture d'écran : <br>
<br>
<img width="516" height="62" alt="image" src="https://github.com/user-attachments/assets/1b0604e8-84d7-48b1-801c-fe0bb0a54d61" />
<br>
<br>
<br>
